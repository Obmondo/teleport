---
title: Get Started with Teleport on Kubernetes
description: Use this local demo to get started with Teleport on Kubernetes in 10 minutes.
---

In this guide, we will show you how to set up Teleport on a local Kubernetes cluster. You will see how Teleport enables users to access private resources in your cluster, all from a single ingress port, so you can configure authentication, authorization, and audit.

Our demo will run on minikube, a local Kubernetes deployment. The cluster will run the Kubernetes-supported web-based dashboard, which is accessible via a Service open only to other resources in the cluster. One pod will run the Teleport Auth Service and Proxy Service. Another pod will run the Teleport Application Service and enable access to the dashboard to authorized end-users.

## Prerequisites

While this guide deploys resources only on your local development machine, you will need access to the public Internet.

Make sure that the following tools are installed on your local machine.

|Tool|Purpose|Installation link|
|---|---|---|
|minikube|Local Kubernetes deployment tool|[Install minikube](https://minikube.sigs.k8s.io/docs/start/)|
|Helm|Kubernetes package manager|[Install Helm](https://helm.sh/docs/intro/install/)|
|kubectl|Kubernetes admin CLI|[Install kubectl](https://kubernetes.io/docs/tasks/tools/)|
|tctl|Teleport admin CLI (part of the `teleport` binary)|[Install Teleport](https://goteleport.com/docs/installation/)|

To run minikube, you will need to install a supported driver, i.e., a local virtualization or isolation environment that can run the cluster. Docker is a good cross-platform solution. You can read about all supported platforms here:

[Drivers](https://minikube.sigs.k8s.io/docs/drivers/)

You should also install a one-time passcode (OTP) application like Authy on your mobile device.

## Step 1/ Deploy resources

### Start minikube

Start minikube, which will run with your default driver:

```code
$ minikube start
```

Add the Teleport Helm repository, which will make it easier to deploy Teleport on your local Kubernetes cluster:

```code
$ helm repo add teleport https://charts.releases.teleport.dev
```

### Install the Teleport Auth Service and Proxy Service

Install the `teleport-cluster` chart. This deploys the Teleport Auth Service and Proxy Service. The Proxy Service handles authentication requests from users, executes cryptographic challenges against the Auth Service, directs traffic to resources within the cluster.

```code
$ helm install teleport-cluster teleport/teleport-cluster --create-namespace --namespace=teleport-cluster --set clusterName=${CLUSTER_NAME?}
$ kubectl config set-context --current --namespace teleport-cluster

Verify that Teleport is running.

```code
$ kubectl get pods
NAME                               READY   STATUS    RESTARTS   AGE
teleport-cluster-b9dc6c68b-d75fb   1/1     Running   0          46s
$ kubectl get services
NAME               TYPE           CLUSTER-IP       EXTERNAL-IP   PORT(S)                                                                     AGE
teleport-cluster   LoadBalancer   10.107.218.212   <pending>     443:32143/TCP,3023:30618/TCP,3026:32750/TCP,3024:32406/TCP,3036:30687/TCP   2m2s
```

### Expose the Proxy Service to your local machine

The `teleport-cluster` service uses a `LoadBalancer` type, meaning that your platform needs to supply a load balancer to route traffic to the service. The `minikube tunnel` command provides a load balancer and establishes a reverse SSH tunnel to ports on your local machine so you can access the Teleport Proxy Service.

Open a new terminal and run the following command to create a reverse tunnel. In this case, the tunnel forwards port 443, so you will need to enter your password.

```code
$ minikube tunnel
‚úÖ  Tunnel successfully started

üìå  NOTE: Please do not close this terminal as this process must stay alive for the tunnel to be accessible ...

‚ùó  The service/ingress teleport-cluster requires privileged ports to be exposed: [443]
üîë  sudo permission will be asked for it.
üèÉ  Starting tunnel for service teleport-cluster.
Password:
```

The `teleport-cluster` service should now have an external IP:

```code
$ kubectl get services
NAME               TYPE           CLUSTER-IP       EXTERNAL-IP   PORT(S)                                                                     AGE
teleport-cluster   LoadBalancer   10.107.218.212   127.0.0.1     443:32143/TCP,3023:30618/TCP,3026:32750/TCP,3024:32406/TCP,3036:30687/TCP   6m18s
```

The Proxy Service enables you to manage your cluster via an HTTP API. Verify that this is working:

```
$ curl --insecure https://localhost:443/webapi/ping
{"auth":{"type":"local","second_factor":"otp","preferred_local_mfa":"otp","has_motd":false},"proxy":{"kube":{"enabled":true,"listen_addr":"0.0.0.0:3026"},"ssh":{"listen_addr":"[::]:3023","tunnel_listen_addr":"0.0.0.0:3024","public_addr":"teleport-cluster:443"},"db":{"mysql_listen_addr":"0.0.0.0:3036"},"tls_routing_enabled":false},"server_version":"8.2.0","min_client_version":"7.0.0"}%                           
```

<Admonition type="warning" title="Certificate warning">
The Teleport Proxy Service requires a TLS certificate and private key. In this guide, Teleport runs with a self-signed certificate. For convenience, we configure HTTP clients not to verify the certificate. 

In production setups, you will need to configure Teleport to use a certificate from a Certificate Authority like Let's Encrypt.
</Admonition>

### Deploy the Kubernetes dashboard

The Kubernetes dashboard scrapes data from your cluster and displays it via a browser-based user interface. Deploy it using the following command:

```code
$ kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.4.0/aio/deploy/recommended.yaml
```

Verify that the dashboard service and metrics scraper are running:

```code
$ kubectl get services -n kubernetes-dashboard
NAME                        TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)    AGE
dashboard-metrics-scraper   ClusterIP   10.100.9.163   <none>        8000/TCP   8s
kubernetes-dashboard        ClusterIP   10.100.80.65   <none>        443/TCP    8s
```

Notice that the `kubernetes-dashboard` service has an open HTTPS port but is not accessible outside the cluster. By enabling Teleport Application Access, we will alow users to securely access the dashboard.

<Notice type="tip">
If installing the dashboard leads to an unexpected result, check the following documentation for updated installation steps: [Deploying the Dashboard UI](https://kubernetes.io/docs/tasks/access-application-cluster/web-ui-dashboard/#deploying-the-dashboard-ui).
</Notice>

## Step 2/ Create a user
We will create a Teleport user who can access the Kubernetes dashboard from outside the cluster. To do this, you use the `tctl` administrative tool, which manages the Teleport Auth Service.

Run the following commands to get the name of the pod that runs the Teleport Auth Service and execute a `tctl` command to create a user:

```code
# We will use this variable for subsequent commands
$ PROXY_POD=$(kubectl get po -l app=teleport-cluster -o jsonpath='{.items[0].metadata.name}')
$ kubectl exec $PROXY_POD -- tctl users add --roles=access appuser
User "appuser" has been created but requires a password. Share this URL with the user to complete user setup, link is valid for 1h:
https://teleport-cluster:443/web/invite/<token>

NOTE: Make sure teleport-cluster:443 points at a Teleport proxy which users can access.
```

Next, open a browser at `https://localhost/web/invite/<token>`, copying the token from the URl returned by the `tctl` command you executed. minikube's reverse tunnel will allow you to access the Teleport Proxy Service on your local machine's default HTTPS port.

(!docs/pages/includes/insecure-certificate.mdx!)

![Teleport User Registration](../../img/quickstart/login.png)

In the Teleport Web UI, enter a password and scan the QR code with your OTP application to create your user. 

<Details title="Don't want to use MFA in your local demo?" opened={false}>
We recommend requiring a second factor for all Teleport users. However, for convenience, you can run the following command to create a dynamic configuration resource that disables MFA for your demo user:

```code
$ kubectl exec -i $PROXY_POD -- bash -c "cat<<EOF>>/home/cp.yaml
kind: cluster_auth_preference
version: v2
metadata:
  name: cluster-auth-preference
spec:
  type: local
  second_factor: 'off'
EOF
tctl create --force --confirm /home/cp.yaml" 
```
</Details>

After signing in, you will navigate to the Teleport Web UI.


## Step 3/ Enable access to the Kubernetes dashboard
{/* TODO */}

## Next steps
{/* TODO: link to other Kubernetes guides */}

## Further reading
- [Deploy and Access the Kubernetes Dashboard](https://kubernetes.io/docs/tasks/access-application-cluster/web-ui-dashboard/)

